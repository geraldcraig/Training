{"ast":null,"code":"import * as api from \"../../api\";\nimport { openAlertMessage } from \"./alertActions\";\nexport const authActions = {\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\"\n};\nexport const getActions = dispatch => {\n  return {\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\n    register: (userDetails, history) => dispatch(register(userDetails, history))\n  };\n};\n\nconst setUserDetails = userDetails => {\n  return {\n    type: authActions.SET_USER_DETAILS,\n    userDetails\n  };\n};\n\nconst login = (userDetails, history) => {\n  return async dispatch => {\n    const response = await api.login(userDetails);\n    console.log(response);\n\n    if (response.error) {\n      var _response$exception, _response$exception$r;\n\n      dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception = response.exception) === null || _response$exception === void 0 ? void 0 : (_response$exception$r = _response$exception.response) === null || _response$exception$r === void 0 ? void 0 : _response$exception$r.data));\n    } else {\n      const {\n        userDetails\n      } = response === null || response === void 0 ? void 0 : response.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  };\n};\n\nconst register = (userDetails, history) => {\n  return async dispatch => {\n    const response = await api.register(userDetails);\n    console.log(response);\n\n    if (response.error) {\n      var _response$exception2, _response$exception2$;\n\n      dispatch(openAlertMessage(response === null || response === void 0 ? void 0 : (_response$exception2 = response.exception) === null || _response$exception2 === void 0 ? void 0 : (_response$exception2$ = _response$exception2.response) === null || _response$exception2$ === void 0 ? void 0 : _response$exception2$.data));\n    } else {\n      const {\n        userDetails\n      } = response === null || response === void 0 ? void 0 : response.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  };\n};","map":{"version":3,"sources":["/Users/geraldcraig/Repos/discord-app/discord-frontend/src/store/actions/authActions.js"],"names":["api","openAlertMessage","authActions","SET_USER_DETAILS","getActions","dispatch","login","userDetails","history","register","setUserDetails","type","response","console","log","error","exception","data","localStorage","setItem","JSON","stringify","push"],"mappings":"AAAA,OAAO,KAAKA,GAAZ,MAAqB,WAArB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AAEA,OAAO,MAAMC,WAAW,GAAG;AACzBC,EAAAA,gBAAgB,EAAE;AADO,CAApB;AAIP,OAAO,MAAMC,UAAU,GAAIC,QAAD,IAAc;AACtC,SAAO;AACLC,IAAAA,KAAK,EAAE,CAACC,WAAD,EAAcC,OAAd,KAA0BH,QAAQ,CAACC,KAAK,CAACC,WAAD,EAAcC,OAAd,CAAN,CADpC;AAELC,IAAAA,QAAQ,EAAE,CAACF,WAAD,EAAcC,OAAd,KACRH,QAAQ,CAACI,QAAQ,CAACF,WAAD,EAAcC,OAAd,CAAT;AAHL,GAAP;AAKD,CANM;;AAQP,MAAME,cAAc,GAAIH,WAAD,IAAiB;AACtC,SAAO;AACLI,IAAAA,IAAI,EAAET,WAAW,CAACC,gBADb;AAELI,IAAAA;AAFK,GAAP;AAID,CALD;;AAOA,MAAMD,KAAK,GAAG,CAACC,WAAD,EAAcC,OAAd,KAA0B;AACtC,SAAO,MAAOH,QAAP,IAAoB;AACzB,UAAMO,QAAQ,GAAG,MAAMZ,GAAG,CAACM,KAAJ,CAAUC,WAAV,CAAvB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,QAAIA,QAAQ,CAACG,KAAb,EAAoB;AAAA;;AAClBV,MAAAA,QAAQ,CAACJ,gBAAgB,CAACW,QAAD,aAACA,QAAD,8CAACA,QAAQ,CAAEI,SAAX,iFAAC,oBAAqBJ,QAAtB,0DAAC,sBAA+BK,IAAhC,CAAjB,CAAR;AACD,KAFD,MAEO;AACL,YAAM;AAAEV,QAAAA;AAAF,UAAkBK,QAAlB,aAAkBA,QAAlB,uBAAkBA,QAAQ,CAAEK,IAAlC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAed,WAAf,CAA7B;AAEAF,MAAAA,QAAQ,CAACK,cAAc,CAACH,WAAD,CAAf,CAAR;AACAC,MAAAA,OAAO,CAACc,IAAR,CAAa,YAAb;AACD;AACF,GAZD;AAaD,CAdD;;AAgBA,MAAMb,QAAQ,GAAG,CAACF,WAAD,EAAcC,OAAd,KAA0B;AACzC,SAAO,MAAOH,QAAP,IAAoB;AACzB,UAAMO,QAAQ,GAAG,MAAMZ,GAAG,CAACS,QAAJ,CAAaF,WAAb,CAAvB;AACAM,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,QAAIA,QAAQ,CAACG,KAAb,EAAoB;AAAA;;AAClBV,MAAAA,QAAQ,CAACJ,gBAAgB,CAACW,QAAD,aAACA,QAAD,+CAACA,QAAQ,CAAEI,SAAX,kFAAC,qBAAqBJ,QAAtB,0DAAC,sBAA+BK,IAAhC,CAAjB,CAAR;AACD,KAFD,MAEO;AACL,YAAM;AAAEV,QAAAA;AAAF,UAAkBK,QAAlB,aAAkBA,QAAlB,uBAAkBA,QAAQ,CAAEK,IAAlC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAed,WAAf,CAA7B;AAEAF,MAAAA,QAAQ,CAACK,cAAc,CAACH,WAAD,CAAf,CAAR;AACAC,MAAAA,OAAO,CAACc,IAAR,CAAa,YAAb;AACD;AACF,GAZD;AAaD,CAdD","sourcesContent":["import * as api from \"../../api\";\r\nimport { openAlertMessage } from \"./alertActions\";\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\r\n    register: (userDetails, history) =>\r\n      dispatch(register(userDetails, history)),\r\n  };\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails,\r\n  };\r\n};\r\n\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.login(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n\r\nconst register = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push(\"/dashboard\");\r\n    }\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}